<!DOCTYPE html>
<html lang="en">

<%- include('header') %>

<body id="kt_body" class="header-fixed header-mobile-fixed subheader-enabled subheader-fixed aside-enabled aside-fixed aside-minimize-hoverable page-loading">
    <%- include('mobile-navbar') %>
    <div class="d-flex flex-column flex-root">
        <div class="d-flex flex-row flex-column-fluid page">
             <%- include('sidebar') %>
            <div class="d-flex flex-column flex-row-fluid wrapper pt-20" id="kt_wrapper">
                 <%- include('navbar') %>
                <div class="content d-flex flex-column flex-column-fluid p-10">
                    <div class = "row">
                        <div class="col-md-12 bg-primary p-2 mb-2 text-white">
                            <div class="d-flex justify-content-around">
                                <div class = "d-flex align-items-center" style = "font-size:20px; font-weight:bold;">The Clinic</div>
                                <ul class="nav nav-tabs nav-pills" data-tabs="tabs">
                                    <li class="nav-item">
                                        <a class="nav-link text-white active" href="#contact_info" data-toggle="tab">Contact info</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link text-white" href="#working_hour" data-toggle="tab">Working Hours</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link text-white" href="#additional_info" data-toggle="tab">Additional Info</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="tab-content">
                                <div class="tab-pane active" id="contact_info">
                                    <div class="row my-3 p-10 bg-white border rounded">
                                        <div class="col-12 d-flex d-flex align-items-center justify-content-end">
                                            <div class="mr-1">Show:</div>
                                            <div class="d-flex align-items-center"><input type="checkbox" id="desc_toggle" style="width:20px; height:20px;"></div>
                                        </div>
                                        <div class="col-12 mb-2">
                                            <h3>Clinic Description</h3>
                                        </div>
                                        <div class="col-6 mb-2">
                                            <div class="form-group">
                                                <h6>Description(En)</h6>
                                                <textarea class="form-control" id="desc_en" rows="5"><%= component.t_location_desc.en %></textarea>
                                            </div>
                                        </div>
                                        <div class="col-6 mb-2">
                                            <div class="form-group">
                                                <h6>Description(Es)</h6>
                                                <textarea class="form-control" id="desc_es" rows="5"><%= component.t_location_desc.es %></textarea>
                                            </div>
                                        </div>
                                        <div class="col-12 d-flex d-flex align-items-center justify-content-end mt-3">
                                            <div class="mr-1">Show:</div>
                                            <div class="d-flex align-items-center"><input type="checkbox" id="contact_info_toggle" style="width:20px; height:20px;"></div>
                                        </div>
                                        <div class="col-12 mb-2">
                                            <h3>Contact Info</h3>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label class="bmd-label-static">Name</label>
                                                <input type="text" class="form-control" id="name" required value="<%= contact_info.name %>">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="bmd-label-static">Address</label>
                                                <input type="text" class="form-control" id="address" required value="<%= contact_info.address %>">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="bmd-label-static">Acronym</label>
                                                <input type="text" class="form-control" id="acronym" required value="<%= contact_info.acronym %>">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="bmd-label-static">City</label>
                                                <input type="text" class="form-control" id="city" required value="<%= contact_info.city %>">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="bmd-label-static">State</label>
                                                <select name='state' id='state' class="form-control" style='height:36px;'>
                                                    <optgroup label="Alaskan/Hawaiian Time Zone">
                                                        <option value="AK">Alaska</option>
                                                        <option value="HI">Hawaii</option>
                                                    </optgroup>
                                                    <optgroup label="Pacific Time Zone">
                                                        <option value="CA">California</option>
                                                        <option value="NV">Nevada</option>
                                                        <option value="OR">Oregon</option>
                                                        <option value="WA">Washington</option>
                                                    </optgroup>
                                                    <optgroup label="Mountain Time Zone">
                                                        <option value="AZ">Arizona</option>
                                                        <option value="CO">Colorado</option>
                                                        <option value="ID">Idaho</option>
                                                        <option value="MT">Montana</option>
                                                        <option value="NE">Nebraska</option>
                                                        <option value="NM">New Mexico</option>
                                                        <option value="ND">North Dakota</option>
                                                        <option value="UT">Utah</option>
                                                        <option value="WY">Wyoming</option>
                                                    </optgroup>
                                                    <optgroup label="Central Time Zone">
                                                        <option value="AL">Alabama</option>
                                                        <option value="AR">Arkansas</option>
                                                        <option value="IL">Illinois</option>
                                                        <option value="IA">Iowa</option>
                                                        <option value="KS">Kansas</option>
                                                        <option value="KY">Kentucky</option>
                                                        <option value="LA">Louisiana</option>
                                                        <option value="MN">Minnesota</option>
                                                        <option value="MS">Mississippi</option>
                                                        <option value="MO">Missouri</option>
                                                        <option value="OK">Oklahoma</option>
                                                        <option value="SD">South Dakota</option>
                                                        <option value="TX">Texas</option>
                                                        <option value="TN">Tennessee</option>
                                                        <option value="WI">Wisconsin</option>
                                                    </optgroup>
                                                    <optgroup label="Eastern Time Zone">
                                                        <option value="CT">Connecticut</option>
                                                        <option value="DE">Delaware</option>
                                                        <option value="FL">Florida</option>
                                                        <option value="GA">Georgia</option>
                                                        <option value="IN">Indiana</option>
                                                        <option value="ME">Maine</option>
                                                        <option value="MD">Maryland</option>
                                                        <option value="MA">Massachusetts</option>
                                                        <option value="MI">Michigan</option>
                                                        <option value="NH">New Hampshire</option>
                                                        <option value="NJ">New Jersey</option>
                                                        <option value="NY" selected>New York</option>
                                                        <option value="NC">North Carolina</option>
                                                        <option value="OH">Ohio</option>
                                                        <option value="PA">Pennsylvania</option>
                                                        <option value="RI">Rhode Island</option>
                                                        <option value="SC">South Carolina</option>
                                                        <option value="VT">Vermont</option>
                                                        <option value="VA">Virginia</option>
                                                        <option value="WV">West Virginia</option>
                                                    </optgroup>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="bmd-label-static">Zip Code</label>
                                                <input type="text" class="form-control" id="zip" required value="<%= contact_info.zip %>">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="bmd-label-static">Tel</label>
                                                <input type="text" class="form-control" id="tel" required value="<%= contact_info.tel %>">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="bmd-label-static">Fax</label>
                                                <input type="text" class="form-control" id="fax" value="<%= contact_info.fax %>">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="bmd-label-static">Email</label>
                                                <input type="email" class="form-control" id="email" value="<%= contact_info.email %>">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label class="bmd-label-static">Domain</label>
                                                <input type="url" class="form-control" id="domain" value="<%= contact_info.domain %>">
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div class="d-flex justify-content-start align-items-center">
                                                    <label class="bmd-label-static mr-4">Portal</label>
                                                    <div class="d-flex align-items-center justify-content-end mb-2">
                                                        <div class="d-flex align-items-center"><input type="checkbox" id="portal_show" style="width:20px; height:20px;" />&nbsp;&nbsp;Display</div>
                                                    </div>
                                                </div>
                                                <input type="url" class="form-control" id="portal" value="<%= contact_info.portal %>">
                                            </div>
                                        </div>
                                        <div class="col-12 text-right">
                                            <button class="btn btn-light-primary pull-right" onclick="updateContactInfo()">Update</button>
                                        </div>
                                    </div>
                                    <div class="row my-3 p-10 bg-white border rounded">
                                        <div class="col-12 d-flex justify-content-between">
                                            <div>
                                                <h3>Google Map</h3>
                                                <h4>(Automatically shows the clinic address)</h4>
                                            </div>
                                            <div class="d-flex d-flex align-items-center">
                                                <div class="mr-1">Show:</div>
                                                <div class="d-flex align-items-center"><input type="checkbox" id="map_toggle" style="width:20px; height:20px;"></div>
                                            </div>
                                        </div>
                                        <iframe
                                            id="preview"
                                            width="100%"
                                            height="450"
                                            style="border:none;"
                                            loading="lazy"
                                            allowfullscreen
                                            src="https://www.google.com/maps/embed/v1/place?key=<%= google_api_key %>&q=<%= contact_info.address %> <%= contact_info.city %> <%= contact_info.state %> <%= contact_info.zip %>">
                                        </iframe>
                                    </div>
                                    <div class="row my-3 p-10 bg-white border rounded">
                                        <div class="col-12 mb-5">
                                            <h3>Logo | Favicon | Domain QR Code</h3>
                                        </div>
                                        <div class="col-12 d-flex align-items-center">
                                            <div class="col-4 text-center d-flex flex-column align-items-center">
                                                <img src="<%= site_url + "/assets/images/logo.png" %>" width="100%" style="max-width:240px;">
                                                <span class="btn btn-light-primary mt-5" onclick="window.filename = 'logo.png'; $('#logo_upload_modal').modal('show');">Upload Logo Image</span>
                                            </div>
                                            <div class="col-4 text-center d-flex flex-column align-items-center">
                                                <img src="<%= site_url + "/assets/images/favicon.png" %>" width="100%" style="max-width:100px;">
                                                <span class="btn btn-light-primary mt-5" onclick="window.filename = 'favicon.png'; $('#logo_upload_modal').modal('show');">Upload Favicon Image</span>
                                            </div>
                                            <div class="col-4 text-center d-flex flex-column align-items-center">
                                                <img src="<%= site_url + "/assets/images/qrcode.png" %>" width="100%" style="max-width:120px;" class="mb-2">
                                                <div class="d-flex justify-content-center align-items-center">
                                                    <a class="btn btn-link btn-light-primary mr-3" href="<%= site_url + prefix + "/the-clinic/getQRCode?filetype=png" %>" target="_blank">PNG</a>|
                                                    <a class="btn btn-link btn-light-primary ml-3" href="<%= site_url + prefix + "/the-clinic/getQRCode?filetype=pdf" %>" target="_blank">PDF</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="working_hour">
                                    <div class="row my-3 p-10 bg-white border rounded">
                                        <div class = "col-12 d-flex d-flex align-items-center justify-content-end">
                                            <div class = "mr-1">Show:</div>
                                            <div class = "d-flex align-items-center"><input type = "checkbox" id = "working_hour_toggle" style = "width:20px; height:20px;"></div>
                                        </div>
                                        <div class = "col-12 mb-4 d-flex justify-content-between align-items-center my-5 my-5">
                                            <div><h3>Working Hours</h3></div>
                                            <div class = 'working_hour_add_btn btn btn-light-primary btn-icon' ><i class = 'fa fa-plus'></i></div>
                                        </div>
                                        <div class = "col-12">
                                            <div class="table-responsive">
                                                <table class="table" id="working_hour_tb">
                                                    <thead>
                                                        <th>Weekday</th>
                                                        <th>Time</th>
                                                        <th>Action</th>
                                                    </thead>
                                                    <tbody>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row my-3 p-10 bg-white border rounded">
                                        <div class = "col-12 d-flex d-flex align-items-center justify-content-end">
                                            <div class = "mr-1">Show:</div>
                                            <div class = "d-flex align-items-center"><input type = "checkbox" id = "after_hours_toggle" style = "width:20px; height:20px;"></div>
                                        </div>
                                        <div class = "col-12 mb-2"><h3>After Hours</h3></div>
                                        <div class = "col-md-6">
                                            <div class="form-group">
                                                <h6>After Hours(EN)</h6>
                                                <div id = 'after_hours_en'></div>
                                            </div>
                                        </div>
                                        <div class = "col-md-6">
                                            <div class="form-group">
                                                <h6>After Hours (ES)</h6>
                                                <div id = 'after_hours_es'></div>
                                            </div>
                                        </div>
                                        <div class="col-12 text-right">
                                            <button class="btn btn-light-primary pull-right" onclick = 'updateAfterHours();'>Update</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="additional_info">
                                    <div class = "row my-3 p-10 bg-white border rounded">
                                        <div class = "col-12 d-flex d-flex align-items-center justify-content-end">
                                            <div class = "mr-1">Show:</div>
                                            <div class = "d-flex align-items-center"><input type = "checkbox" id = "social_media_toggle" style = "width:20px; height:20px;"></div>
                                        </div>
                                        <div class = "col-12 mb-4 d-flex justify-content-between align-items-center my-5">
                                            <div><h3>Social Media</h3></div>
                                            <div class = 'add_social_media_btn btn btn-light-primary btn-icon' ><i class = 'fa fa-plus'></i></div>
                                        </div>
                                        <div class = "col-12">
                                            <div class="table-responsive">
                                                <table class="table" id="social_media_tb">
                                                    <thead>
                                                        <th>ID</th>
                                                        <th>Logo</th>
                                                        <th>URL</th>
                                                        <th>Display</th>
                                                        <th style = "width: 100px;">Action</th>
                                                    </thead>
                                                    <tbody>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class = "row my-3 p-10 bg-white border rounded">
                                        <div class = "row col-12">
                                            <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
                                                <div class = "mr-1">Show:</div>
                                                <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_1_toggle" style = "width:20px; height:20px;"></div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(En)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_1_en" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(En)</h6>
                                                    <div id="desc_1_en"></div>
                                                </div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(Es)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_1_es" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(Es)</h6>
                                                    <div id="desc_1_es"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class = "row col-12">
                                            <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
                                                <div class = "mr-1">Show:</div>
                                                <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_2_toggle" style = "width:20px; height:20px;"></div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(En)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_2_en" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(En)</h6>
                                                    <div id="desc_2_en"></div>
                                                </div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(Es)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_2_es" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(Es)</h6>
                                                    <div id="desc_2_es"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class = "row col-12">
                                            <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
                                                <div class = "mr-1">Show:</div>
                                                <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_3_toggle" style = "width:20px; height:20px;"></div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(En)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_3_en" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(En)</h6>
                                                    <div id="desc_3_en"></div>
                                                </div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(Es)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_3_es" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(Es)</h6>
                                                    <div id="desc_3_es"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class = "row col-12">
                                            <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
                                                <div class = "mr-1">Show:</div>
                                                <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_4_toggle" style = "width:20px; height:20px;"></div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(En)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_4_en" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(En)</h6>
                                                    <div id="desc_4_en"></div>
                                                </div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(Es)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_4_es" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(Es)</h6>
                                                    <div id="desc_4_es"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class = "row col-12">
                                            <div class = "my-3 col-12 d-flex d-flex align-items-center justify-content-end">
                                                <div class = "mr-1">Show:</div>
                                                <div class = "d-flex align-items-center"><input type = "checkbox" id = "desc_5_toggle" style = "width:20px; height:20px;"></div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(En)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_5_en" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(En)</h6>
                                                    <div id="desc_5_en"></div>
                                                </div>
                                            </div>
                                            <div class = "col-6">
                                                <div class = "form-group">
                                                    <h6>Title(Es)</h6>
                                                    <input class="form-control" style = "font-size:25px;" id="title_5_es" type="text" />
                                                </div>
                                                <div class = "form-group">
                                                    <h6>Description(Es)</h6>
                                                    <div id="desc_5_es"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class = "col-12 text-right">
                                            <div class="btn btn-light-primary" id = "additional_update">Update</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="logo_upload_modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title ">Upload Image</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class="row">
                        <div class='col-md-12'>
                            <h6>Image</h6>
                            <div class="custom-file form-group">
                                <input type="file" class="custom-file-input" id="upload_image_img" name="upload_image_img">
                                <label class="custom-file-label" for="upload_image_img">Choose file</label>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-light-primary" data-dismiss="modal" onclick="uploadLogo();">Done</button>
                    <button type="button" class="btn btn-light-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="working_hour_add_modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title ">Add Time</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class = "row"> 
                        <div class = "col-md-6">
                            <div class="form-group">
                                <h6>Day ( En )</h6>
                                <input name = 'en_worktime_day' id = 'en_worktime_day' class="form-control" type="text" />
                            </div>
                        </div>
                        <div class = "col-md-6">
                            <div class="form-group">
                                <h6>Day ( Es )</h6>
                                <input name = 'es_worktime_day' id = 'es_worktime_day' class="form-control" type="text" />
                            </div>
                        </div>
                        <div class = "col-md-6">
                            <div class="form-group">
                                <h6>Time ( En )</h6>
                                <input name = 'en_worktime_time' id = 'en_worktime_time' class="form-control" type="text" />
                            </div>
                        </div>
                        <div class = "col-md-6">
                            <div class="form-group">
                                <h6>Time ( Es )</h6>
                                <input name = 'es_worktime_time' id = 'es_worktime_time' class="form-control" type="text" />
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-light-primary add_working_hour_confirm" data-dismiss="modal">Done</button>
                    <button type="button" class="btn btn-light-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="working_hour_edit_modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title ">Edit Time</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class = "row">
                        <div class = "col-md-6">
                            <div class="form-group">
                                <h6>Day ( En )</h6>
                                <input name = 'een_worktime_day' id = 'een_worktime_day' class="form-control" type="text" />
                            </div>
                        </div>
                        <div class = "col-md-6">
                            <div class="form-group">
                                <h6>Day ( Es )</h6>
                                <input name = 'ees_worktime_day' id = 'ees_worktime_day' class="form-control" type="text" />
                            </div>
                        </div>
                        <div class = "col-md-6">
                            <div class="form-group">
                                <h6>Time ( En )</h6>
                                <input name = 'een_worktime_time' id = 'een_worktime_time' class="form-control" type="text" />
                            </div>
                        </div>
                        <div class = "col-md-6">
                            <div class="form-group">
                                <h6>Time ( Es )</h6>
                                <input name = 'ees_worktime_time' id = 'ees_worktime_time' class="form-control" type="text" />
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-light-primary edit_working_hour_confirm" data-dismiss="modal">Done</button>
                    <button type="button" class="btn btn-light-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="social_media_add_modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title ">Add Social Media</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class = "row">
                        <div class = "col-md-12">
                            <div class="form-group">
                                <h6>Social Media URL</h6>
                                <input class="form-control" id = "add_social_media_url" type="text">
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-light-primary" data-dismiss="modal" onclick = "createSocialMedia();">Done</button>
                    <button type="button" class="btn btn-light-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="social_media_edit_modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title ">Edit URL</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class = "row">
                        <div class = 'col-md-12'>
                            <div class="form-group">
                                <h6>URL</h6>
                                <input class="form-control" id = "edit_social_media_url" type="text">
                            </div>
                            <div class="form-group">
                                <h6>Status</h6>
                                <select class="form-control" id = "edit_social_media_status" style="height:36px;">
                                    <option value="1">Visible</option>
                                    <option value="0">Invisible</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-light-primary" data-dismiss="modal" onclick = "updateSocialMedia();">Done</button>
                    <button type="button" class="btn btn-light-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="social_media_upload_modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title ">Upload Logo</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <div class = "row">
                        <div class = 'col-md-12'>
                            <h6>Logo</h6>
                            <div class="custom-file form-group">
                                <input type="file" class="custom-file-input" id="upload_social_media_img">
                                <label class="custom-file-label" for="upload_social_media_img">Choose file</label>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-light-primary" data-dismiss="modal" onclick = "uploadImage();">Done</button>
                    <button type="button" class="btn btn-light-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</body>

<script>
    $(document).ready(function() {
        // Portal Show Check Box
        const portal_show = "<%= contact_info.portal_show %>"
        if (portal_show == 0) {
            $("#portal_show").prop("checked", false)
        } else {
            $("#portal_show").prop("checked", true)
        }

        $("#state").val("<%= contact_info && contact_info.state ? contact_info.state : '' %>");

        const working_hour_tb = $('#working_hour_tb').DataTable({
            "pagingType": "full_numbers",
            "order": [[ 2, 'asc' ]],
            "lengthMenu": [
                [10, 25, 50, -1],
                [10, 25, 50, "All"]
            ],
            responsive: true,
            language: {
                search: "_INPUT_",
                searchPlaceholder: "Search working hour",
            },
            "ajax": {
                "url": "<%= site_url + prefix %>/the-clinic/readWorkingHour",
                "type": "GET"
            },
            "columns": [
                { data: 'en_name',
                    render: function (data, type, row) {
                        return `${row.en_name}&nbsp;&nbsp;<small>${row.es_name}</small>`
                    } 
                },
                { data: 'es_time',
                    render: function (data, type, row) {
                        return `${row.en_time}&nbsp;&nbsp;<small>${row.es_time}</small>`
                    } 
                },
                { data: 'id',
                    render: function (data, type, row) {
                        return `
                        <div idkey="`+row.id+`">
                            <span class="btn btn-icon btn-sm btn-light-warning edit_working_hour_btn"><i class="fas fa-edit"></i></span>
                            <span class="btn btn-icon btn-sm btn-light-danger  delete_working_hour_btn"><i class="fas fa-trash"></i></span>
                        </div>
                        `
                    } 
                }
            ]
        });

        $(".working_hour_add_btn").click(function() {
            $("#working_hour_add_modal").modal('show');
        });

        $(".add_working_hour_confirm").click(function() {
            $.ajax ({
                url: '<%= site_url + prefix %>/the-clinic/createWorkingHour',
                method: "POST",
                data: {
                    en_day:$("#en_worktime_day").val(),
                    es_day:$("#es_worktime_day").val(),
                    en_time:$("#en_worktime_time").val(),
                    es_time:$("#es_worktime_time").val()
                },
                dataType: "json",
                success: function (res) {
                    if(res.status == "success"){
                        toastr.success("Saved Successfully")
                        working_hour_tb.ajax.reload()
                    } else{
                        toastr.error("Failed in Save")
                    }
                }, error: function (error) {
                    toastr.error("Error has occurred on the serve")
                }
            });
        });

        $(document).on("click",".edit_working_hour_btn",function() {
            window.id = $(this).parent().attr("idkey");
            $.ajax ({
                url: '<%= site_url + prefix %>/the-clinic/chooseWorkingHour',
                method: "POST",
                data: {id: window.id},
                dataType: "json",
                success: function (res) {
                    const data = res.data
                    $("#een_worktime_day").val(data['en_name']);
                    $("#ees_worktime_day").val(data['es_name']);
                    $("#een_worktime_time").val(data['en_time']);
                    $("#ees_worktime_time").val(data['es_time']);
                    $("#working_hour_edit_modal").modal('show');
                }
            });
        });

        $(".edit_working_hour_confirm").click(function() {
            $.ajax ({
                url: '<%= site_url + prefix %>/the-clinic/updateWorkingHour',
                method: "POST",
                data: {
                    id: window.id, 
                    en_day:$("#een_worktime_day").val(),
                    es_day:$("#ees_worktime_day").val(),
                    en_time:$("#een_worktime_time").val(),
                    es_time:$("#ees_worktime_time").val()
                },
                dataType: "json",
                success: function (data) {
                    working_hour_tb.ajax.reload()
                }
            });
        });

        $(document).on("click",".delete_working_hour_btn",function() {
            window.id = $(this).parent().attr("idkey");
            Swal.fire({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes, delete it!'
            }).then((result) => {
                if (result.value) {
                    $.ajax ({
                        url: '<%= site_url + prefix %>/the-clinic/deleteWorkingHour',
                        method: "POST",
                        data: {id: window.id},
                        dataType: "json",
                        success: function (res) {
                            if (res.status == "succcess") {
                                toastr.success("Deleted Successfully!")
                                social_media_tb.ajax.reload()
                            }
                        }
                    });
                }
            });
        });

        handleAreaToggleBox('#working_hour_toggle', 'clinic_workinghour');
        handleAreaToggleBox('#after_hours_toggle', 'clinic_afterhours');
        handleAreaToggleBox('#contact_info_toggle', 'clinic_contact');
        handleAreaToggleBox('#desc_toggle', 'clinic_desc');
        handleAreaToggleBox('#map_toggle', 'clinic_map');
        handleAreaToggleBox('#social_media_toggle', 'clinic_socialmedia');
        handleAreaToggleBox('#desc_1_toggle', 'clinic_additional_1');
        handleAreaToggleBox('#desc_2_toggle', 'clinic_additional_2');
        handleAreaToggleBox('#desc_3_toggle', 'clinic_additional_3');
        handleAreaToggleBox('#desc_4_toggle', 'clinic_additional_4');
        handleAreaToggleBox('#desc_5_toggle', 'clinic_additional_5');

        const social_media_tb = $('#social_media_tb').DataTable({
            "autoWidth": false,
            "pagingType": "full_numbers",
            "lengthMenu": [
                [10, 25, 50, -1],
                [10, 25, 50, "All"]
            ],
            responsive: true,
            language: {
                search: "_INPUT_",
                searchPlaceholder: "Search social media",
            },
            "ajax": {
                "url": "<%= site_url + prefix %>/the-clinic/readSocialMedia",
                "type": "GET"
            },
            "columns": [
                { data:'id' },
                { data: 'img', render:function(data, type, row){
                        return `<img style="width:100px; height:80px;" src="` + `<%= site_url %>/assets/images/social_media/${row.img}"></img>`
                    }
                },
                { data: 'url' },
                { data: 'status', render: function(data, type, row){
                        if(row.status == 1)
                            return `<div class="text-success">Visible</div>`;
                        else
                            return `<div class="text-danger">Invisible</div>`;
                    }
                },
                { data: 'id',
                    render: function (data, type, row) {
                        return `
                            <div data-id = "${row.id}">
                                <span class="btn btn-icon btn-sm btn-light-primary upload_social_media_btn"><i class="fas fa-image"></i></span>
                                <span class="btn btn-icon btn-sm btn-light-warning edit_social_media_btn"><i class="fas fa-edit"></i></span>
                                <span class="btn btn-icon btn-sm btn-light-danger  delete_social_media_btn"><i class="fas fa-trash"></i></span>
                            </div>
                            `
                    }
                }
            ]
        });

        $(document).on('click', '.delete_social_media_btn', function() {
            window.id = $(this).closest('div').attr('data-id');
            Swal.fire({
                title: 'Are you sure?',
                text: "You won't be able to revert this!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes, delete it!'
            }).then((result) => {
                if (result.value) {
                    $.ajax ({
                        url: '<%= site_url + prefix %>/the-clinic/deleteSocialMedia',
                        method: "POST",
                        data: {id: window.id},
                        dataType: "json",
                        success: function (res) {
                            if (res.status == "success") {
                                toastr.success("Deleted Successfully!")
                                social_media_tb.ajax.reload()
                            }
                        }
                    });
                }
            });
        });

        $("#additional_update").click(function() {
            var data = [];
            data[0] = $("#title_1_en").val();
            data[1] = $("#title_1_es").val();

            data[2] = $("#desc_1_en").summernote("code");
            data[3] = $("#desc_1_es").summernote("code");

            data[4] = $("#title_2_en").val();
            data[5] = $("#title_2_es").val();
            data[6] = $("#desc_2_en").summernote("code");
            data[7] = $("#desc_2_es").summernote("code");

            data[8] = $("#title_3_en").val();
            data[9] = $("#title_3_es").val();
            data[10] = $("#desc_3_en").summernote("code");
            data[11] = $("#desc_3_es").summernote("code");

            data[12] = $("#title_4_en").val();
            data[13] = $("#title_4_es").val();
            data[14] = $("#desc_4_en").summernote("code");
            data[15] = $("#desc_4_es").summernote("code");

            data[16] = $("#title_5_en").val();
            data[17] = $("#title_5_es").val();
            data[18] = $("#desc_5_en").summernote("code");
            data[19] = $("#desc_5_es").summernote("code");

            $.ajax({
                url: '<%= site_url + prefix %>/the-clinic/updateAdditional',
                method: "POST",
                data: {infoes: JSON.stringify(data)},
                dataType: "json",
                success: function (res) {
                    if (res.status == "success") {
                        handleResponse("ok")
                    }
                }
            });
        });

        $(".add_social_media_btn").click(function() {
            $("#social_media_add_modal").modal('show');
        });

        $(document).on('click', '.edit_social_media_btn', function() {
            window.id = $(this).closest('div').attr('data-id');
            var url, status;
            $.ajax({
                url: '<%= site_url + prefix %>/the-clinic/chooseSocialMedia',
                method: "POST",
                data: {id: window.id},
                dataType: "json",
                success: function (res) {
                    const data = res.data
                    url = data['url'];
                    status = data['status'];
                }
            }).then(() => {
                $("#edit_social_media_url").val(url);
                $("#edit_social_media_status").val(status);

                $("#social_media_edit_modal").modal('show');
            });
        });

        $(document).on('click', '.upload_social_media_btn', function() {
            window.id = $(this).closest('div').attr('data-id');
            $("#social_media_upload_modal").modal('show');
        });

    });

    $('#after_hours_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#after_hours_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#after_hours_en").summernote("code",`<%- component.t_after_hours.en %>`);
    $("#after_hours_es").summernote("code",`<%- component.t_after_hours.es %>`);

    $('#desc_1_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_1_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_1_en").summernote("code",`<%- component.t_clinic_additional_1_desc.en %>`);
    $("#desc_1_es").summernote("code",`<%- component.t_clinic_additional_1_desc.es %>`);

    $('#desc_2_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_2_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_2_en").summernote("code",`<%- component.t_clinic_additional_2_desc.en %>`);
    $("#desc_2_es").summernote("code",`<%- component.t_clinic_additional_2_desc.es %>`);

    $('#desc_3_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_3_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_3_en").summernote("code",`<%- component.t_clinic_additional_3_desc.en %>`);
    $("#desc_3_es").summernote("code",`<%- component.t_clinic_additional_3_desc.es %>`);

    $('#desc_4_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_4_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_4_en").summernote("code",`<%- component.t_clinic_additional_4_desc.en %>`);
    $("#desc_4_es").summernote("code",`<%- component.t_clinic_additional_4_desc.es %>`);

    $('#desc_5_en').summernote({
        tabsize: 1,
        height: 150,
    });
    $('#desc_5_es').summernote({
        tabsize: 1,
        height: 150,
    });
    $("#desc_5_en").summernote("code",`<%- component.t_clinic_additional_5_desc.en %>`);
    $("#desc_5_es").summernote("code",`<%- component.t_clinic_additional_5_desc.es %>`);

    $("#title_1_en").val(`<%= component.t_clinic_additional_1_title.en %>`);
    $("#title_1_es").val(`<%= component.t_clinic_additional_1_title.es %>`);

    $("#title_2_en").val(`<%= component.t_clinic_additional_2_title.en %>`);
    $("#title_2_es").val(`<%= component.t_clinic_additional_2_title.es %>`);

    $("#title_3_en").val(`<%= component.t_clinic_additional_3_title.en %>`);
    $("#title_3_es").val(`<%= component.t_clinic_additional_3_title.es %>`);

    $("#title_4_en").val(`<%= component.t_clinic_additional_4_title.en %>`);
    $("#title_4_es").val(`<%= component.t_clinic_additional_4_title.es %>`);

    $("#title_5_en").val(`<%= component.t_clinic_additional_5_title.en %>`);
    $("#title_5_es").val(`<%= component.t_clinic_additional_5_title.es %>`);

    function updateContactInfo() {
        var data = {
            name: $("#name").val(),
            address: $("#address").val(),
            acronym: $('#acronym').val(),
            city: $("#city").val(),
            state: $("#state").val(),
            zip: $("#zip").val(),
            tel: $("#tel").val(),
            fax: $("#fax").val(),
            email: $("#email").val(),
            domain: $("#domain").val(),
            portal: $("#portal").val(),
            desc_en: $("#desc_en").val(),
            desc_es: $("#desc_es").val(),
            portal_show: $("#portal_show").prop("checked") === true ? 1 : 0
        };

        $.ajax({
            url: '<%= site_url + prefix %>/the-clinic/updateContactInfo',
            method: "POST",
            data: data,
            dataType: "json",
            success: function(res) {
                if (res.status == 'success') {
                    $("#preview").attr('src', "https://www.google.com/maps/embed/v1/place?key=<%= google_api_key%>&q=" + data.address + " " + data.city + " " + data.state + " " + data.zip)
                    mynotify('success', 'Update Success.')
                }
            }
        });

    }

    function uploadLogo() {
        var fd = new FormData();
        var img = $('#upload_image_img')[0].files;
        if (img.length > 0) {
            fd.append('img', img[0]);
        }
        fd.append('filename', window.filename)
        $.ajax({
            url: '<%= site_url + prefix %>/the-clinic/uploadLogo',
            type: 'post',
            data: fd,
            contentType: false,
            processData: false,
            dataType: "json",
            success: function(data) {
                if (data.status == "success") {
                    location.reload();
                    mynotify('success', 'Upload Success');
                } else {
                    mynotify('danger', 'Upload Fail');
                }
            }
        });
    }

    function updateAfterHours() {
        after_hours_en = $("#after_hours_en").summernote("code");
        after_hours_es = $("#after_hours_es").summernote("code");
        $.ajax({
            url: '<%= site_url + prefix %>/the-clinic/updateAfterHour',
            method: "POST",
            data: {
                after_hours_en: after_hours_en, 
                after_hours_es: after_hours_es
            },
            dataType: "json",   
            success: function (res) {
                if (res.status == "success") {
                    handleResponse("ok")
                }
            }
        });
    }
    
    function createSocialMedia() {
        url = $("#add_social_media_url").val();
        $.ajax ({
            url: '<%= site_url + prefix %>/the-clinic/createSocialMedia',
            method: "POST",
            data: {url: url},
            dataType: "json",
            success: function (res) {
                if (res.status == "success") {
                    $('#social_media_tb').DataTable().ajax.reload();
                    mynotify('success','Saved Successfully!');
                } else {
                    mynotify('danger','Failed in Save');
                }
            }, error: function () {
                mynotify('danger','An error was occurred on the server');
            }
        });
    }

    function updateSocialMedia() {
        url = $("#edit_social_media_url").val();
        status = $("#edit_social_media_status").val();
        $.ajax ({
            url: '<%= site_url + prefix %>/the-clinic/updateSocialMedia',
            method: "POST",
            data: {id: window.id, url: url, status: status},
            dataType: "json",
            success: function (res) {
                if (res.status == "success") {
                    $('#social_media_tb').DataTable().ajax.reload();
                    mynotify('success','Saved Successfully!');
                } else {
                    mynotify('danger','Failed in Save');
                }
            }, error: function () {
                mynotify('danger','An error was occurred on the server');
            }
        });
    }

    function uploadImage() {
        var fd = new FormData();
        var img = $('#upload_social_media_img')[0].files;
        if(img.length > 0 ){
            fd.append('id', window.id);
            fd.append('img',img[0]);
        }
        $.ajax({
            url: '<%= site_url + prefix %>/the-clinic/uploadSocialMedia',
            type: 'post',
            data: fd,
            contentType: false,
            processData: false,
            dataType: "json",
            success: function (res) {
                if (res.status == "success") {
                    $('#social_media_tb').DataTable().ajax.reload();
                    mynotify('success','Saved Successfully!');
                } else {
                    mynotify('danger','Failed in Save');
                }
            }, error: function () {
                mynotify('danger','An error was occurred on the server');
            }
        });
    }

</script>

</html>
